

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>Windows 下端口不可用的可能情况解决 - 鼠熊部落格</title>
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/chippy.css">
  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <nav class="menu-outer">
    <div class="menu-inner">
      
      <a class="menu-inner-item" href="/">
        <span class="menu-inner-item-icon"></span>
        <span class="menu-inner-item-text">首页</span>
      </a>
      
      <a class="menu-inner-item" href="/about">
        <span class="menu-inner-item-icon"></span>
        <span class="menu-inner-item-text">关于我</span>
      </a>
      
      <a class="menu-inner-item" href="/archives">
        <span class="menu-inner-item-icon"></span>
        <span class="menu-inner-item-text">归档</span>
      </a>
      
    </div>
  </nav>

  <header class="header-outer">
    <div class="header-inner">
      <div class="header-info">
        
        <h1 class="header-info-title">
          Chipmunk &amp; Panda
        </h1>
        
        
        <h3 class="header-info-subtitle">
          -- 鼠熊部落格
        </h3>
        
        
        <p class="header-info-motto">
          All work and no play makes Jack a dull boy.
        </p>
        
        <div class="header-info-contact">
          <a target="_blank" rel="noopener" href="https://github.com/SummerDiver" class="header-info-contact-icon">
            <i class="icon-github"></i>
          </a>
          <a target="_blank" rel="noopener" href="https://weibo.com/u/7390819624" class="header-info-contact-icon">
            <i class="icon-sina-weibo"></i>
          </a>
          <a href="mailto:summerdiver@yeah.net" class="header-info-contact-icon">
            <i class="icon-mail4"></i>
          </a>
          <a href="" class="header-info-contact-icon ie" onclick="return false">
            <i class="icon-IE"></i>
          </a>
        </div>
      </div>
      <a href="#content" class="header-arrow">
        <i class="icon-forward2"></i>
      </a>
    </div>
  </header>

  <div id="content" class="content-outer clearfix">
    <aside id="content-aside" class="content-aside">
      

<div class="aside-card aside-toc">
  <h3>文章目录</h3>
  <div class="toc-content">
    <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="post-toc-number">1.</span> <span class="post-toc-text">问题描述</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="post-toc-number">2.</span> <span class="post-toc-text">问题解决</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%B2%BB%E6%A0%87"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">治标</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%B2%BB%E6%9C%AC"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">治本</span></a></li></ol></li></ol>
  </div>
</div>


<div class="aside-card aside-ov">
  <div class="author">
    <div class="author-avatar">
      <img src="/images/avatar.jpg">
    </div>
    <h4 class="author-name">暑熊</h4>
    <p class="author-motto">自家慢诩便便腹，开卷方知未读书。</p>
  </div>
  <div class="divider-horizontal"></div>
  <div class="site-state">
    <a class="site-state-item" href="/archives">
      <span class="site-state-item-count">22</span>
      <span class="site-state-item-name">归档</span>
    </a>
    <div class="divider-vertical"></div>
    <a class="site-state-item" href="/categories">
      <span class="site-state-item-count">5</span>
      <span class="site-state-item-name">分类</span>
    </a>
    <div class="divider-vertical"></div>
    <a class="site-state-item" href="/tags">
      <span class="site-state-item-count">17</span>
      <span class="site-state-item-name">标签</span>
    </a>
  </div>
  <div class="divider-horizontal"></div>
  <div class="friends">
    <div>
      <i class="icon-link"></i>&nbsp;友情链接
    </div>
    
    <div class="no-friends">
      <span class="icon-tongue"></span><br>
      <span>朋友都没有，好像一条狗</span>
    </div>
    
    <ul class="friends-list">
      
    </ul>
  </div>
</div>
    </aside>
    <main class="content-inner">
      <article id="post">
  <div class="post-header">
  
  <h1 class="post-title" href="/2023/11/16/Windows%E4%B8%8B%E7%AB%AF%E5%8F%A3%E4%B8%8D%E5%8F%AF%E7%94%A8%E7%9A%84%E5%8F%AF%E8%83%BD%E6%83%85%E5%86%B5%E8%A7%A3%E5%86%B3/">Windows 下端口不可用的可能情况解决</h1>
  

  <div class="post-meta">
    <time class="post-date" datetime="2023-11-16T08:00:29.000Z">
      <i class="icon-calendar"></i>&nbsp;2023-11-16
    </time>

    
    <span class="post-categories">
      <i class="icon-folder">&nbsp;</i>
      <a class="post-category-link" href="/categories/%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">问题记录</a>
    </span>
    

    
    <span class="post-tags">
      <i class="icon-price-tags">&nbsp;</i>
      <a class="post-tag-link" href="/tags/Docker/" rel="tag">#Docker</a>&nbsp;<a class="post-tag-link" href="/tags/Windows/" rel="tag">#Windows</a>
    </span>
    
  </div>
</div>
  
  <p>参考：<a target="_blank" rel="noopener" href="https://gsw945.com/index.php/archives/33/">(Windows)以一种访问权限不允许的方式做了一个访问套接字的尝试处理</a>、<a target="_blank" rel="noopener" href="https://blog.deanosim.net/windows-10-winnat-and-why-your-programs-cant-listen-on-certain-ports/">Windows 10 WINNAT and why your programs can’t listen on certain ports.</a></p>
<span id="more"></span>

<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>源于使用 Docker 搭建了本地的 Jellyfin 服务，但是发现有时候无法访问（启动不成功，端口被“占用”）。</p>
<p>现象类似参考博客，实际使用 <code>netstat -ano | findstr 8096</code> 查看端口占用情况，发现端口并没有被占用。</p>
<h1 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h1><h2 id="治标"><a href="#治标" class="headerlink" title="治标"></a>治标</h2><p>使用 <code>netsh interface ipv4 show excludedportrange protocol=tcp</code> 可以查看被 ban 的端口范围，尚不清楚这个范围由什么规定，而且也不是每次都会被 ban。如果端口在这个范围内，则无法使用。</p>
<p>重启 winnat 服务（需要管理员权限）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">net stop winnat<br>net start winnat<br></code></pre></td></tr></table></figure>

<p>重启后被 ban 清单就干净了，重启 Docker 中容器即可正常使用。</p>
<h2 id="治本"><a href="#治本" class="headerlink" title="治本"></a>治本</h2><p>待续，个人直接给容器换了个端口映射。</p>

  
  
  
  <div class="post-nav">
    <div class="post-nav-item">
      
      <a href="/2024/03/02/Ubuntu%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98%E8%87%B3%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE/" rel="prev" title="Ubuntu 开机自动挂载硬盘至指定位置">
        <i class="icon-arrow_back_ios"></i>&nbsp;Ubuntu 开机自动挂载硬盘至指定位置
      </a>
      
    </div>
    <div class="post-nav-item">
      
      <a href="/2023/10/18/SSH-%E9%9A%A7%E9%81%93%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5-MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" rel="next" title="SSH 隧道远程连接 MySQL 数据库问题记录">
        SSH 隧道远程连接 MySQL 数据库问题记录&nbsp;<i class="icon-arrow_forward_ios"></i>
      </a>
      
    </div>
  </div>
  
</article>
    </main>
  </div>

  <footer class="footer-outer">
    <div class="footer-inner">
      <div class="copyright">
        Copyright © 2021~2024 <a target="_blank" rel="noopener" href="https://github.com/SummerDiver"><i class="icon-pacmanr"></i>&nbsp;暑熊&nbsp;<i class="icon-pacmanl"></i></a> <br>
        Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo<i class="icon-new-tab"></i></a>
        <br>
      </div>
    </div>
  </footer>

  
  <!-- scripts list from theme config.yml -->
  
  <script src="/js/jquery-3.6.0.min.js"></script>
  
  <script src="/js/chippy.js"></script>
  
  <script src="/js/menubar.js"></script>
  
  <script src="/js/toc.js"></script>
  
  
</body>

</html>